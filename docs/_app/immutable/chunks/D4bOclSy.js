import{f as W,a as F,s as X}from"./BkPaZSxt.js";import{p as be,b,d as ie,o as we,h as z,g as e,e as m,t as B,a as ye,u as J,s as w,c as d,r as c}from"./7KN1XG01.js";import{p as k,i as _e,b as ce}from"./jQt6__yx.js";import{S as de,e as Oe,s as Se,c as fe,i as Re,d as De}from"./B63XpyKO.js";var Te=W("<h5> </h5>"),Ie=W('<tr><td><div class="mr-2 h-4 w-4 rounded-full"></div></td><td class="w-24 truncate text-left font-semibold"> </td><td class="w-16 text-right"> </td></tr>'),Ue=W('<div><!> <div class="flex w-full flex-row gap-4"><div class="h-64 grow overflow-hidden rounded-2xl border border-gray-200 shadow-sm"><canvas class="h-full w-full bg-(--back-color)"></canvas></div> <div class="flex w-48 flex-col gap-2"><!> <!> <div><h5 class="px-4">Values</h5> <table class="w-full font-mono text-sm"><tbody></tbody></table></div></div></div></div>');function Ve(ve,y){be(y,!0);let me=k(y,"id",19,()=>crypto.randomUUID()),ue=k(y,"wrapperClass",3,""),E=k(y,"label",19,()=>({name:"",class:""})),r=k(y,"streamingData",23,()=>({data:[],timestamp:Date.now()})),H=k(y,"isTest",3,!1),o=b(ie([])),D=b(ie([])),T,u,s,_=b(600),p=b(125);const $=[{id:"RefreshOption-AUTO",name:"AUTO",value:0,class:""},{id:"RefreshOption-10",name:"10",value:10,class:""},{id:"RefreshOption-25",name:"25",value:25,class:""},{id:"RefreshOption-50",name:"50",value:50,class:""},{id:"RefreshOption-100",name:"100",value:100,class:""},{id:"RefreshOption-250",name:"250",value:250,class:""},{id:"RefreshOption-500",name:"500",value:500,class:""},{id:"RefreshOption-1000",name:"1000",value:1e3,class:""},{id:"RefreshOption-5000",name:"5000",value:5e3,class:""}],j=[{id:"ScaleOption-50",name:"50",value:50,class:""},{id:"ScaleOption-100",name:"100",value:100,class:""},{id:"ScaleOption-500",name:"500",value:500,class:""},{id:"ScaleOption-1000",name:"1000",value:1e3,class:""},{id:"ScaleOption-2000",name:"2000",value:2e3,class:""}];let O=b(0),I=b(100);const q=J(()=>e(O)==0?20:100),L=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899"];let Y=b(0);const K=()=>{if(typeof r()=="string"&&r(JSON.parse(r())),!r().data||r().data.length===0){m(o,[],!0),m(D,[],!0);return}const t=r().data.slice(0,6).map((a,n)=>{const i=e(o).find(v=>v.name===a.name)||e(o)[n];return{id:i?.id||crypto.randomUUID(),points:i?.points||[],color:L[n%L.length],name:a.name||`Value ${n}`}});JSON.stringify(e(o))!==JSON.stringify(t)&&(m(o,t,!0),m(D,r().data.map(a=>a.value||0),!0))};we(K),z(()=>{K()});let P;z(()=>(clearInterval(P),e(O)>0&&r().data&&r().data.length>0?P=setInterval(()=>{let t;H()?t=e(o).map(()=>Math.random()*100-50):t=r().data.map(n=>n.value);const a=Date.now();t.forEach((n,i)=>{e(o)[i]&&(e(o)[i].points.push({x:a,y:n}),e(o)[i].points.length>e(q)&&e(o)[i].points.shift(),e(D)[i]=n)}),M()},e(O)):e(O)==0&&r().data&&r().data.length>0&&!H()&&(P=setInterval(()=>{e(Y)<(r().timestamp??Date.now())&&(r().data.map(a=>a.value).forEach((a,n)=>{e(o)[n]&&(e(o)[n].points.push({x:r().timestamp??Date.now(),y:a}),e(o)[n].points.length>e(q)&&e(o)[n].points.shift(),e(D)[n]=a)}),M(),m(Y,r().timestamp??Date.now(),!0))},10)),()=>clearInterval(P)));let G;z(()=>{if(!T||!u)return;const t=window.devicePixelRatio||1;return G=new ResizeObserver(()=>{const a=T.getBoundingClientRect();m(_,a.width,!0),m(p,a.height,!0),u.width=e(_)*t,u.height=e(p)*t,u.style.width=`${e(_)}px`,u.style.height=`${e(p)}px`,s=u.getContext("2d"),s.setTransform(t,0,0,t,0,0),M()}),G.observe(T),()=>G.disconnect()});const M=()=>{if(!s)return;s.clearRect(0,0,e(_),e(p));const t={top:10,right:10,bottom:20,left:35},a=e(_)-t.left-t.right,n=e(p)-t.top-t.bottom,i=e(o).flatMap(l=>l.points),v=Math.min(...i.map(l=>l.x)),S=Math.max(...i.map(l=>l.x))-v||1,g=l=>t.left+(l-v)/S*a,h=l=>t.top+n-(l/e(I)*n/2+n/2);s.strokeStyle="#777",s.fillStyle="#777",s.lineWidth=.5,s.font="10px monospace",s.textAlign="center";const N=Date.now();for(let l=0;l<=10;l++){const x=v+l/10*S,f=g(x),R=((x-N)/1e3).toFixed(0);s.beginPath(),s.moveTo(f,t.top),s.lineTo(f,e(p)-t.bottom),s.stroke(),s.textBaseline="top",s.fillText(`${R}s`,f,e(p)-t.bottom+2)}s.textAlign="right",s.textBaseline="middle";const C=8;for(let l=0;l<=C;l++){const x=e(I)-l*2*e(I)/C,f=h(x);s.beginPath(),s.moveTo(t.left,f),s.lineTo(e(_)-t.right,f),s.stroke(),s.fillText(`${x.toFixed(0)}`,t.left-5,f)}s.lineWidth=2,e(o).forEach(({points:l,color:x})=>{if(l.length<2)return;s.strokeStyle=x,s.beginPath(),s.moveTo(g(l[0].x),h(l[0].y));for(let R=1;R<l.length-1;R++){const V=l[R],oe=l[R+1],ge=(V.x+oe.x)/2,xe=(V.y+oe.y)/2;s.quadraticCurveTo(g(V.x),h(V.y),g(ge),h(xe))}const f=l[l.length-1];s.lineTo(g(f.x),h(f.y)),s.stroke()})};var U=Ue(),Q=d(U);{var he=t=>{var a=Te(),n=d(a,!0);c(a),B(()=>{fe(a,1,`w-full px-4 text-center ${E().class}`),X(n,E().name)}),F(t,a)};_e(Q,t=>{E().name&&t(he)})}var Z=w(Q,2),A=d(Z),pe=d(A);ce(pe,t=>u=t,()=>u),c(A),ce(A,t=>T=t,()=>T);var ee=w(A,2),te=d(ee);{let t=J(()=>$.find(a=>a.value==e(O)));de(te,{label:{name:"Refresh rate",class:""},get options(){return $},get value(){return e(t)},onUpdate:a=>m(O,a.value,!0)})}var ae=w(te,2);{let t=J(()=>j.find(a=>a.value==e(I)));de(ae,{label:{name:"Scale"},get options(){return j},get value(){return e(t)},onUpdate:a=>m(I,a.value,!0)})}var se=w(ae,2),le=w(d(se),2),ne=d(le);Oe(ne,21,()=>e(o),Re,(t,a,n)=>{var i=Ie(),v=d(i),re=d(v);c(v);var S=w(v),g=d(S,!0);c(S);var h=w(S),N=d(h,!0);c(h),c(i),B(C=>{De(re,`background-color: ${e(a).color??""}`),X(g,r().data?.[n]?.name),X(N,C)},[()=>e(D)[n].toFixed(2)]),F(t,i)}),c(ne),c(le),c(se),c(ee),c(Z),c(U),B(t=>{Se(U,"id",t),fe(U,1,`relative flex w-full flex-col items-center justify-center ${ue()}`)},[()=>`${me()}-${crypto.randomUUID().slice(0,6)}`]),F(ve,U),ye()}export{Ve as G};
